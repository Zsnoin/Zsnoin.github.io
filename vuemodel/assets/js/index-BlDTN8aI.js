import{d as j,f as r,o as z,b as $,W as b,a1 as p,k as d,X as g,Y as M,Z as x,u as G,a5 as B,F as V,a4 as W,m as K,B as Z,H as q,a6 as X}from"./v-vendor-DseNja-c.js";import{a0 as Y,a1 as i,S as J,a2 as Q,Z as ee,I as ae,H as te,s as oe,B as se}from"./a-vendor-DKGJKRZd.js";import{N as y}from"./n-vendor-BiA8Twdn.js";import{_ as U}from"./l-vendor-B7hqWtQ9.js";import{e as C,s as ne}from"./index-C3vcHQUi.js";import"./d-vendor-D5uLyb19.js";import"./x-vendor-XSf_N5Ib.js";import"./c-vendor-DT-1cMbM.js";import"./r-vendor-FYZc961W.js";import"./p-vendor-DaMtyeKJ.js";import"./s-vendor-BkeUiZSM.js";import"./t-vendor-CUWDS_la.js";import"./j-vendor-Im7Ltmq8.js";import"./f-vendor-EnPhvkmS.js";import"./w-vendor-DN4vedGv.js";const A=Y.create({baseURL:"/api",timeout:6e4});A.interceptors.request.use(e=>{if(y.start(),e.data&&e.data.isUpload){e.headers["Content-Type"]="multipart/form-data",e.headers.processData=!1,e.data=k(e.data,!0);let t=new FormData;for(let a of Object.keys(e.data)){let o=e.data[a];if(o===null)break;if(Array.isArray(o))for(let s of o)t.append(a,s);else t.append(a,o)}e.data=t}return e},e=>{y.done(),Promise.reject(e)});A.interceptors.response.use(e=>{U.includes(e.headers["content-disposition"],"attachment")&&le(e);let t={200:async()=>{e.data.prompt&&i.success({message:e.data.prompt,duration:3})},400:async()=>{i.error({message:e.data.msg,duration:3})},401:async()=>{i.error({message:e.data.msg,duration:3}),C.emit("API:UN_AUTH")},403:async()=>{i.error({message:e.data.msg,duration:3})},500:async()=>{i.error({message:e.data.msg,duration:3})}};try{t[e.data.code]()}catch{}return y.done(),Promise.resolve(e.data)},e=>{let t={401:async()=>{i.error({message:e.response.statusText,duration:3}),C.emit("API:UN_AUTH")},403:async()=>{i.error({message:e.response.statusText,duration:3})},415:async()=>{i.error({message:e.response.statusText,duration:3})},500:async()=>{i.error({message:e.response.statusText,duration:3})}};try{t[e.response.status]()}catch{}return y.done(),Promise.reject(e)});function le(e){let t,a=re(e.headers["content-disposition"].split("filename*=UTF-8''")[1]);if("download"in document.createElement("a"))t=e.data;else{i.error({message:"浏览器不支持",duration:3});return}const o=new Blob([t]);window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(o,a):ie(window.URL.createObjectURL(o),a)}function re(e){for(var t=[],a=0;a<e.length;a++){var o=e.charAt(a);if(o=="+")t[t.length]=" ";else if(o=="%"){var s=e.substring(a+1,a+3);parseInt("0x"+s)>127?(t[t.length]=decodeURI(e.substring(a,a+9)),a+=8):(t[t.length]=String.fromCharCode(parseInt("0x"+s)),a+=2)}else t[t.length]=o}return t.join("")}function ie(e,t){const a=document.createElement("a");a.download=t,a.style.display="none",a.href=e,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(e)}const T=function(e){let t=typeof e;return e!=null&&(t=="object"||t=="function")},ce=["$$hashKey"],k=function(e,t,a,o){if(o=o||{},a=a||"",e&&T(e)&&e.toString().indexOf("[object File]")===-1){let s;if(Array.isArray(e))for(let[n,c]of e.entries())s=a,a+="["+n+"]",o=k(c,t,a,o),a=s;else for(let n of Object.keys(e)){let c=e[n];s=a,T(c)&&c.toString().indexOf("[object File]")===-1&&!Array.isArray(c)&&t?a+=n+".":a+=n,o=k(c,t,a,o),a=s}}else ce.includes(a)||(o[a]=e);return o},ue=e=>A.get("/imgSource/apihzimgbaidu.php",{params:e}),de={class:"header"},me={class:"imgBox"},pe={class:"locationBox"},ve=j({__name:"index",setup(e){const t=r([]),a=r(null),o=r(1),s=r(0),n=r(),c=r(30),L=r(2),w=r(""),I=r(0),_=r(!1),h=async()=>{_.value=!0;const m={id:10000732,key:"b9bea682d5bbf442f27ba8637d558707",words:w.value||"4k动漫电脑壁纸",page:o.value,limit:c.value,type:L.value};try{const l=await ue(m);_.value=!1,l.res.forEach(v=>{const f={src:v,show:!0};t.value.push(f)}),I.value=l.count,s.value=l.maxpage}catch(l){_.value=!1,console.log(l)}},D=U.throttle(()=>{if(a.value&&!_.value){const m=a.value.scrollHeight,l=a.value.scrollTop,v=a.value.clientHeight;m-(l+v)<=50&&o.value<s.value&&(o.value++,h())}},500),O=()=>{n.value||(n.value=1),n.value=Math.max(1,Math.min(n.value,s.value)),o.value=n.value,t.value=[],h()},F=U.debounce(()=>{o.value=1,t.value=[],h()},1e3),P=m=>{ne("LOGIN_IMG",`url(${m})`),ee.success("设置成功！")};return z(()=>{h(),a.value&&a.value.addEventListener("scroll",D)}),$(()=>{a.value&&a.value.removeEventListener("scroll",D)}),(m,l)=>{const v=ae,f=J,S=te,E=oe,H=se,N=M("wc-waterfall"),R=Q;return x(),b("div",{class:"bigBox",ref_key:"imgDom",ref:a},[p("div",de,[d(f,null,{default:g(()=>[d(v,{style:{width:"120px"},size:"small",value:w.value,"onUpdate:value":l[0]||(l[0]=u=>w.value=u),placeholder:"关键词",onChange:G(F)},null,8,["value","onChange"])]),_:1}),p("b",null,[d(f,null,{default:g(()=>[d(S,{type:"number",style:{width:"120px"},size:"small",value:n.value,"onUpdate:value":l[1]||(l[1]=u=>n.value=u),placeholder:"起始页","enter-button":"",onSearch:O},null,8,["value"]),p("i",null,"页数："+B(o.value),1),p("i",null,"总页数："+B(s.value),1),p("i",null,"总数："+B(I.value),1)]),_:1})])]),d(R,null,{default:g(()=>[d(N,{gap:"10",cols:"3",class:"img"},{default:g(()=>[(x(!0),b(V,null,W(t.value,u=>K((x(),b("div",me,[p("div",pe,[d(E,{src:u.src,onError:()=>u.show=!1},null,8,["src","onError"]),d(H,{class:"btn",size:"small",type:"primary",onClick:fe=>P(u.src)},{default:g(()=>[q("设为壁纸")]),_:2},1032,["onClick"])])],512)),[[Z,u.show]])),256))]),_:1})]),_:1})],512)}}}),Le=X(ve,[["__scopeId","data-v-2cfe36a1"]]);export{Le as default};
