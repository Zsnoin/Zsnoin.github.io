import{f as w,b as S,c as T,d as P}from"./index-C3vcHQUi.js";import{r as V,u as v,w as R}from"./x-vendor-XSf_N5Ib.js";import"./d-vendor-D5uLyb19.js";import{P as _,a as y,a3 as x,a4 as j,a5 as C,I as M,k as U}from"./a-vendor-DKGJKRZd.js";import{d as E,f as q,W as z,k as n,X as c,Z as D,H as I,a5 as B,u as O,a1 as k,a9 as h,ab as Z,ac as G,a6 as W}from"./v-vendor-DseNja-c.js";import"./p-vendor-DaMtyeKJ.js";import"./c-vendor-DT-1cMbM.js";import"./r-vendor-FYZc961W.js";import"./s-vendor-BkeUiZSM.js";import"./j-vendor-Im7Ltmq8.js";import"./f-vendor-EnPhvkmS.js";import"./n-vendor-BiA8Twdn.js";import"./w-vendor-DN4vedGv.js";import"./l-vendor-B7hqWtQ9.js";import"./t-vendor-CUWDS_la.js";const A=s=>new Promise(e=>{const d=new FileReader;d.readAsArrayBuffer(s),d.onload=m=>{e(m.target.result)}}),N=async s=>{const e=await A(s),d=V(e,{type:"array",cellDates:!0}),m=d.Sheets[d.SheetNames[0]];return v.sheet_to_json(m)},F=(s,e,d="数据导出")=>{const m=s,i=v.aoa_to_sheet([e,...m]),t=v.book_new();i["!cols"]=[];for(let l=0;l<50;l++)l===4?i["!cols"].push({wpx:350}):l===1?i["!cols"].push({wpx:100}):i["!cols"].push({wpx:80});v.book_append_sheet(t,i,"sheet"),R(t,d+".xlsx")},J=s=>(Z("data-v-bba7583d"),s=s(),G(),s),X={class:"my"},H={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 10fr",height:"40px","box-sizing":"border-box","padding-top":"5px","text-align":"center"}},L=J(()=>k("span",null,"——",-1)),$=E({__name:"index",setup(s){const e=q({myButton:{align:"right",refresh:!1,reset:!1,items:[{label:"新增",icon:_,event:{click:t=>{e.value.myModel={open:!0,width:800,title:"新增",labelCol:3,formState:{image:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},slot:"view",items:[{label:"用户",type:"input",field:"user",span:12,labelCol:6,required:!0,validator:(l,o)=>o.length<3||o.length>10?Promise.reject("长度必须在3到10之间"):Promise.resolve()},{label:"单选下拉框",type:"select",field:"code",span:12,labelCol:6,options:[{label:"选项一",value:"1001"},{label:"选项二",value:"1002"}],event:{change:(l,o)=>{}}},{label:"组织",type:"cascader",field:"org",span:12,labelCol:6,options:[{value:1,label:1}],event:{change:(l,o)=>{}}},{label:"多选下拉框",type:"select",field:"code2",mode:"multiple",options:[{label:"选项一",value:"1001"},{label:"选项二",value:"1002"}]},{label:"日期范围",type:"dateRange",field:"dateRange",span:12,labelCol:6},{label:"类型",type:"segmented",field:"segmented",required:!0,message:"请选择",span:12,labelCol:6,options:[{label:"类型一",value:"1001"},{label:"类型二",value:"1002"}]},{label:"普通字符",type:"code",field:"dateRangeMonth"},{label:"上传图片",type:"upload",field:"files",span:12,labelCol:6,event:{upload:({action:l,file:o,onSuccess:f,onError:p,onProgress:g})=>{console.log("上传图片"),e.value.myModel.formState.equipmentPicture="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",e.value.myModel.formState.files=[{url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",status:"done"}]}}},{label:"图片",type:"image",field:"image",span:12,labelCol:6},{label:"数字",type:"number",field:"number",min:0,max:10,span:12,labelCol:6},{label:"多选",type:"checkbox",field:"alls",span:12,labelCol:6,options:[{value:1,label:"测试1"},{value:2,label:"测试2"},{value:3,label:"测试3"},{value:4,label:"测试4"}]},{label:"取值范围",slot:"view",required:!0}],ok:{event:{click:()=>{console.log(e.value.myModel.formState)}}}}}}},{label:"删除",type:"primary",popconfirm:!0,loading:!1,icon:y,danger:!0,event:{click:t=>(console.log(t),new Promise(async l=>{l(!0)}))}},{label:"导入",icon:_,upload:!0,event:{click:t=>new Promise(async l=>{let o=await N(t.file);e.value.myTable.gridOptions.data=o,console.log(o),l(!0)})}},{label:"导出",icon:x,event:{click:()=>new Promise(async t=>{let l=e.value.myTable.gridOptions,o=["age","id"],f=[],p={};l.columns.forEach(r=>{!o.includes(r.field)&&r.field&&(f.push(r.title),p[r.field]=r.field)});let g=l.data.map(r=>{let b={},a=[];for(const u in p)b[u]=r[u];for(const u in b)a.push(b[u]);return a});F(g,f,"测试数据导出"),t(!0)})}},{label:"多选&&单选",icon:x,event:{click:t=>{let l=e.value.myTable.xGrid.getCheckboxRecords(),o=e.value.myTable.xGrid.getRadioRecord();console.log(l,o)}}}]},mySearch:{showBtn:!0,formState:{},items:[{label:"姓名",field:"name",type:"input"},{label:"性别",field:"sex",type:"select",mode:"",options:[{label:"男",value:1},{label:"女",value:2}]},{label:"年龄",field:"age",type:"cascader",multiple:!0,options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[{value:"xihu",label:"West Lake"}]}]},{label:"女",value:2}]},{label:"日期",field:"date",type:"date"},{label:"日期",field:"date2",type:"dateRange"},{label:"日期",field:"date3",type:"month"},{label:"状态",field:"status",type:"segmented",options:[{label:"是",value:2},{label:"否",value:3}]},{label:"大小",field:"num",type:"radio",options:[{label:"大",value:2},{label:"小",value:3}]},{label:"取值范围",field1:"min",field2:"max",type:"valueRange"}]},myTable:{tablePage:{total:300},gridOptions:{loading:!1,keepSource:!0,editConfig:{trigger:"click",mode:"row",showStatus:!0,showAsterisk:!0},rowClassName:t=>{if(t.row.age>25)return"lessAge"},columns:[{type:"checkbox",width:35,fixed:"left"},{type:"radio",width:50,title:"单选",fixed:"left"},{type:"seq",width:80,title:"序号"},{field:"id",title:"id",sortable:!0},{field:"age",title:"年龄",sortable:!0},{field:"name",title:"姓名",sortable:!0,editRender:{autofocus:".ant-input"},slots:{edit:"name"}},{field:"sex",title:"性别",sortable:!0,slots:{default:"sex",edit:"sexs"},editRender:{autofocus:".ant-input"}},{field:"date",title:"日期",sortable:!0,editRender:{autofocus:".ant-input"},slots:{edit:"date"}},{title:"操作",width:150,slots:{default:"operate"},fixed:"right"}],data:[{id:1,name:"Test1Test1",sex:"Man",age:28,date:"2023-07-08T10:00:23"},{id:2,name:"Test2",sex:"Women",age:22,date:"2023-07-08T10:00:23"},{id:3,name:"Test1Test2",sex:"Man",age:28,date:"2023-07-08T10:00:23"},{id:4,name:"Test3",sex:"Women",age:22,date:"2023-07-08T10:00:23"}],editRules:{name:[{required:!0}],sex:[{required:!0}]}},slots:[{name:"operate",items:[{label:"",tooltip:"详情",type:"default",icon:y,size:"large",event:{click:t=>{console.log(t),e.value.myModel={open:!0,title:"详情",formState:{name:t.name,sex:t.sex,date:t.date},items:[{label:"姓名",type:"input",field:"name"},{label:"性别",type:"input",field:"sex"},{label:"日期",type:"input",field:"date"}],ok:{event:{click:()=>{console.log(e.value.myModel.formState)}}}}}}},{label:"",tooltip:"删除",type:"default",icon:j,danger:!0,popconfirm:!0,event:{click:t=>new Promise(l=>{console.log(t),setTimeout(()=>l(!0),1e3)})}},{label:"",tooltip:"保存",type:"default",icon:C,color:"green",size:"small",event:{click:t=>{const l=e.value.myTable.xGrid;l&&l.clearEdit().then(()=>{e.value.myTable.xGrid.validate(!0).then(o=>{console.log(o?"数据验证失败！！！":"数据验证成功！！")})})}}}]},{name:"sex"},{name:"name"},{name:"sexs"},{name:"date"}]},myModel:{}}),d={rules:[{required:!0,message:"最小值"}]},m={rules:[{required:!0,message:"最大值"}]},i=()=>{console.log(e.value.mySearch.formState),setTimeout(()=>{console.log({code:200,data:[{name:"李四",age:12,sex:"男"},{name:"王六",age:15,sex:"女"}],message:"数据获取成功！"})},200)};return(t,l)=>{const o=w,f=S,p=M,g=T,r=U,b=P;return D(),z("div",X,[n(o,{page:e.value,onGetData:i},null,8,["page"]),n(f,{page:e.value,onGetData:i},null,8,["page"]),n(g,{page:e.value,onGetData:i},{sex:c(({row:a})=>[I(B(a.sex)+" ",1),n(O(y))]),name:c(({row:a})=>[n(p,{value:a.name,"onUpdate:value":u=>a.name=u},null,8,["value","onUpdate:value"])]),sexs:c(({row:a})=>[n(p,{value:a.sex,"onUpdate:value":u=>a.sex=u},null,8,["value","onUpdate:value"])]),date:c(({row:a})=>[n(p,{value:a.date,"onUpdate:value":u=>a.date=u},null,8,["value","onUpdate:value"])]),_:1},8,["page"]),n(b,{page:e.value},{view:c(()=>[k("div",H,[n(r,h({name:"minValue"},d),{default:c(()=>[n(p,{style:{width:"50px"},value:e.value.myModel.formState.minValue,"onUpdate:value":l[0]||(l[0]=a=>e.value.myModel.formState.minValue=a)},null,8,["value"])]),_:1},16),L,n(r,h({name:"maxValue",label:""},m),{default:c(()=>[n(p,{style:{width:"50px"},value:e.value.myModel.formState.maxValue,"onUpdate:value":l[1]||(l[1]=a=>e.value.myModel.formState.maxValue=a)},null,8,["value"])]),_:1},16)])]),_:1},8,["page"])])}}}),me=W($,[["__scopeId","data-v-bba7583d"]]);export{me as default};
